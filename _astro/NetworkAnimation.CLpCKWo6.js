import{j as D}from"./jsx-runtime.D_zvdyIk.js";import{r as c}from"./index.RH_Wq4ov.js";function G(){const p=c.useRef(null),M=c.useRef(0),b=c.useRef([]),v=c.useRef([]),E=c.useRef(0),l=c.useRef(1),x=c.useRef(0);return c.useEffect(()=>{const i=p.current;if(!i)return;const t=i.getContext("2d");if(!t)return;const S=()=>{i.width=window.innerWidth,i.height=window.innerHeight};S(),window.addEventListener("resize",S);const P=()=>{const n=Date.now();x.current=n,l.current=Math.min(l.current+.5,3)},R=n=>{const s=Date.now();x.current=s;const r=Math.abs(n.deltaY)/100;l.current=Math.min(l.current+r*.3,4)};window.addEventListener("scroll",P,{passive:!0}),window.addEventListener("wheel",R,{passive:!0});const k=()=>{const n=[],s=Math.floor(i.width*i.height/8e4);for(let r=0;r<Math.min(s,12);r++)n.push({id:r,x:Math.random()*i.width,y:Math.random()*i.height,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,size:Math.random()*3+2,connections:[]});n.forEach(r=>{const m=Math.floor(Math.random()*3)+1;for(let h=0;h<m;h++){const e=Math.floor(Math.random()*n.length);e!==r.id&&!r.connections.includes(e)&&r.connections.push(e)}}),b.current=n},N=()=>{const n=b.current;if(n.length===0)return;const s=Math.floor(Math.random()*n.length),r=n[s];if(r.connections.length>0){const m=r.connections[Math.floor(Math.random()*r.connections.length)];v.current.push({id:Date.now()+Math.random(),fromNode:s,toNode:m,progress:0,speed:Math.random()*.008+.002,trail:[]})}},z=n=>{n-E.current,E.current=n,t.clearRect(0,0,i.width,i.height);const s=b.current,r=v.current;n-x.current>100&&(l.current=Math.max(l.current-.02,1)),l.current,s.forEach(e=>{e.x+=e.vx,e.y+=e.vy,(e.x<=0||e.x>=i.width)&&(e.vx*=-1),(e.y<=0||e.y>=i.height)&&(e.vy*=-1),e.x=Math.max(0,Math.min(i.width,e.x)),e.y=Math.max(0,Math.min(i.height,e.y))});const h=new Set;r.forEach(e=>{e.progress>.9&&h.add(e.toNode),e.progress<.1&&h.add(e.fromNode)}),s.forEach(e=>{e.connections.forEach(o=>{const a=s[o];a&&(h.has(e.id)||h.has(a.id)?(t.strokeStyle="rgba(59, 130, 246, 0.8)",t.lineWidth=2,t.shadowColor="rgba(59, 130, 246, 0.8)",t.shadowBlur=6):(document.documentElement.classList.contains("dark")?t.strokeStyle="rgba(185, 194, 211, 0.15)":t.strokeStyle="rgba(75, 85, 99, 0.3)",t.lineWidth=1,t.shadowBlur=0),t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(a.x,a.y),t.stroke())})}),t.shadowBlur=0;for(let e=r.length-1;e>=0;e--){const o=r[e],a=s[o.fromNode],d=s[o.toNode];if(!a||!d){r.splice(e,1);continue}if(o.progress+=o.speed,o.progress>=1){r.splice(e,1);continue}const f=a.x+(d.x-a.x)*o.progress,u=a.y+(d.y-a.y)*o.progress;o.trail.push({x:f,y:u,alpha:1}),o.trail.length>8&&o.trail.shift(),o.trail.forEach((g,y)=>{g.alpha=(y+1)/o.trail.length}),o.trail.forEach((g,y)=>{if(y===0)return;const L=2+y*.5,B=g.alpha*.6;t.fillStyle=`rgba(59, 130, 246, ${B})`,t.beginPath(),t.arc(g.x,g.y,L,0,Math.PI*2),t.fill()});const C=6;t.shadowColor="rgba(59, 130, 246, 0.8)",t.shadowBlur=15;const w=t.createRadialGradient(f,u,0,f,u,C);w.addColorStop(0,"rgba(59, 130, 246, 0.7)"),w.addColorStop(.5,"rgba(59, 130, 246, 0.4)"),w.addColorStop(1,"rgba(59, 130, 246, 0)"),t.fillStyle=w,t.beginPath(),t.arc(f,u,C,0,Math.PI*2),t.fill();const I=2;t.fillStyle="rgba(59, 130, 246, 0.9)",t.beginPath(),t.arc(f,u,I,0,Math.PI*2),t.fill(),t.shadowBlur=0}s.forEach(e=>{const a=e.size;document.documentElement.classList.contains("dark")?(t.shadowColor="rgba(47, 52, 65, 0.6)",t.shadowBlur=8,t.fillStyle="rgba(185, 194, 211, 0.1)",t.beginPath(),t.arc(e.x+1,e.y+1,a,0,Math.PI*2),t.fill(),t.fillStyle="rgba(47, 52, 65, 0.4)",t.beginPath(),t.arc(e.x,e.y,a,0,Math.PI*2),t.fill(),t.fillStyle="rgba(255, 255, 255, 0.2)",t.beginPath(),t.arc(e.x-.5,e.y-.5,a*.6,0,Math.PI*2),t.fill()):(t.shadowColor="rgba(75, 85, 99, 0.4)",t.shadowBlur=6,t.fillStyle="rgba(75, 85, 99, 0.2)",t.beginPath(),t.arc(e.x+1,e.y+1,a,0,Math.PI*2),t.fill(),t.fillStyle="rgba(75, 85, 99, 0.6)",t.beginPath(),t.arc(e.x,e.y,a,0,Math.PI*2),t.fill(),t.fillStyle="rgba(255, 255, 255, 0.4)",t.beginPath(),t.arc(e.x-.5,e.y-.5,a*.6,0,Math.PI*2),t.fill()),t.shadowBlur=0}),Math.random()<.02&&N(),M.current=requestAnimationFrame(z)};return k(),z(0),()=>{window.removeEventListener("resize",S),window.removeEventListener("scroll",P),window.removeEventListener("wheel",R),M.current&&cancelAnimationFrame(M.current)}},[]),D.jsx("canvas",{ref:p,className:"fixed inset-0 -z-10 pointer-events-none",style:{opacity:.7,mixBlendMode:"normal"},"aria-hidden":"true"})}export{G as default};
